<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AutoRide - Next-Gen Ride Booking</title>
  
  
  
  <link rel="manifest" href="/manifest.json" />
<meta name="theme-color" content="#007bff" />

<!-- Service Worker registration -->
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js')
      .then(() => {
        console.log('Service Worker registered successfully.');
      })
      .catch((err) => {
        console.error('Service Worker registration failed:', err);
      });
  }
</script>
<script
  src='https://cdn.jotfor.ms/agent/embedjs/0196de48239e7547a73dad213358e5d227b0/embed.js?skipWelcome=1&maximizable=1'>
</script>
  <script src="https://cdn.jotfor.ms/s/umd/latest/for-embedded-agent.js"></script>
  
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/poppins@3.3.1/index.min.css">
<style>
  /* --- Tomar Existing Styles --- */
  .custom-icon {
    background-image: url('https://autoride.space/img/auto.png');
    background-size: cover;
    width: 40px; 
    height: 40px; 
    display: inline-block;
  }

  body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(120deg,#f8fafc,#fffbe8 75%,#e0e9ff 100%);
    min-height: 100vh;
    overflow-x: hidden;
  }

  .glass {
    background: rgba(255,255,255,0.75);
    backdrop-filter: blur(10px);
  }

  /* --- Google Autocomplete Custom UI (New & Improved) --- */

  /* Suggestion Container */
  .pac-container {
    background-color: #ffffff !important;
    border-radius: 1.25rem !important;
    border: none !important;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.12) !important;
    font-family: 'Poppins', sans-serif !important;
    margin-top: 8px !important;
    z-index: 9999 !important;
    padding-bottom: 5px;
  }

  /* Individual Suggestion Item */
  .pac-item {
    padding: 12px 18px !important;
    cursor: pointer !important;
    border-top: 1px solid #f1f5f9 !important;
    display: flex !important;
    align-items: center !important;
    transition: all 0.2s ease;
  }

  .pac-item:first-child {
    border-top: none !important;
  }

  .pac-item:hover {
    background-color: #f8fafc !important;
  }

  /* Main Jaygar Naam (Bold & Large) */
  .pac-item-query {
    font-size: 16px !important;
    font-weight: 700 !important; /* Ekdom bold */
    color: #1e293b !important;
    padding-right: 5px !important;
  }

  /* Secondary text (Address) - Purapuri hide na kore ektu light kora holo */
  /* Jate legal thake kintu distract na kore */
  .pac-item > span:last-child {
    display: none !important; /* Tomar ager request moto baki address hide rakha holo */
  }

  /* Highlighted Text (Jeta tumi type korcho) */
  .pac-matched {
    color: #4f46e5 !important; /* Indigo color highlight */
  }

  /* --- Powered by Google - Highlighted for Production --- */
  .pac-logo:after {
    content: "";
    padding: 10px !important;
    height: 25px !important;
    background-size: 70px !important;
    opacity: 1 !important; /* Full visible for legal safety */
    filter: none !important; /* Original color */
    display: block !important;
    background-position: right 15px center !important;
    border-top: 1px solid #f1f5f9 !important;
  }

  /* --- Baki Animation & Helpers --- */
  .animate-slide-up {
    animation: slideUp .8s cubic-bezier(.09,.63,.6,1.35) both;
  }
  @keyframes slideUp {
      from { transform: translateY(70px) scale(.98); opacity: 0 }
      to { transform: translateY(0) scale(1); opacity: 1 }
  }
  .floating {
    animation: floating 2.2s ease-in-out infinite alternate;
  }
  @keyframes floating {
    0% { transform:translateY(0);}
    100% { transform:translateY(-12px);}
  }
  
  .tw-gradient {
    background: linear-gradient(93deg, #6366f1 5%, #f59e42 100%);
    background-clip: text; -webkit-background-clip:text; color:transparent; -webkit-text-fill-color:transparent;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {width:8px;background:rgba(0,0,0,.03);}
  ::-webkit-scrollbar-thumb {background:rgba(99, 102, 241, 0.1);border-radius:6px;}

  /* Footer etc (Unchanged) */
  .app-footer {
    padding: 2rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
  }
</style>
</head>
<body class="relative min-h-screen">

  <header class="z-20 fixed top-0 w-full py-3 px-4 flex items-center justify-between glass shadow-md rounded-b-xl border-b border-purple-100 animate-slide-up">
    <div class="flex items-center space-x-3">
      <button id="menuBtn" class="p-2 rounded-full hover:bg-purple-50 transition"><i class="fas fa-bars text-lg text-indigo-700"></i></button>
      <span class="font-semibold text-xl tw-gradient tracking-wide">AutoRide</span>
    </div>
    <div class="flex items-center space-x-4">
      <button id="notifBtn" class="relative group focus:outline-none">
        <i class="fas fa-bell text-indigo-600 text-lg"></i>
        <span class="absolute -top-1 -right-1 bg-rose-500 w-2.5 h-2.5 rounded-full border-2 border-white ring-2 ring-rose-200 animate-pulse"></span>
      </button>
      <!-- Image tag -->
<a href="/profile">
  <img id="profileImage" src="/img/user.jpg" class="w-8 h-8 rounded-full border-2 border-purple-200 shadow-md object-cover" alt="profile">
</a>


    </div>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const authKey = localStorage.getItem('authKey');
    if (authKey) {
      const profileImg1 = document.getElementById('profileImage');
      const profileImg2 = document.getElementById('profileImage2');

      const imagePath = `/uploads/profile/${authKey}-profile.jpg`;

      if (profileImg1) profileImg1.src = imagePath;
      if (profileImg2) profileImg2.src = imagePath;
    }
  });
</script>

  </header>

  <div id="notifPanel" class="hidden fixed z-40 top-16 right-6 bg-white border border-gray-200 rounded-2xl shadow-2xl notif-menu w-80 max-w-xs p-4">
    <div class="flex items-center justify-between mb-3">
      <span class="font-semibold text-gray-800 text-lg flex items-center"><i class="fas fa-bell mr-2 text-indigo-500"></i>Notifications</span>
      <button id="notifCloseBtn" class="p-1.5 rounded-full hover:bg-gray-100"><i class="fas fa-times text-gray-500 text-sm"></i></button>
    </div>
    <ul class="space-y-3 text-sm">
      <li class="flex items-start space-x-3 bg-indigo-50 px-2.5 py-2 rounded-lg">
        <span class="text-indigo-500 mt-1"><i class="fas fa-gift"></i></span>
        <span>
          <span class="font-medium text-gray-700">Refer your friend</span>
          <div class="text-xs text-gray-400">Refer and earn ₹100 in coins. <a href="#" class="underline text-indigo-500">Invite Now</a></div>
        </span>
      </li>
      <li class="flex items-start space-x-3">
        <span class="text-yellow-500 mt-1"><i class="fas fa-coins"></i></span>
        <span>
          <span class="font-medium text-gray-700">You have ₹70 Rapido coins</span>
          <div class="text-xs text-gray-400">Use coins to save on your next ride!</div>
        </span>
      </li>
      <li class="flex items-start space-x-3">
        <span class="text-pink-500 mt-1"><i class="fas fa-bolt"></i></span>
        <span><span class="font-medium">Your Captain is arriving soon.</span><div class="text-xs text-gray-400">Get set to ride in <span class="font-bold">2 min</span>.</div></span>
      </li>
      <li class="flex items-start space-x-3">
        <span class="text-lime-500 mt-1"><i class="fas fa-shield-alt"></i></span>
        <span><span class="font-medium">Safety feedback</span>
          <div class="text-xs text-gray-400">Rate your last ride for a better experience.</div></span>
      </li>
    </ul>
  </div>

  <div id="sideMenu" class="fixed left-0 top-0 z-50 h-full w-[340px] max-w-full glass shadow-2xl border-r border-purple-100 transform -translate-x-full transition-transform duration-400 ease-in-out">
    <div class="flex flex-col h-full">
      <div class="flex items-center justify-between p-4 border-b border-purple-100">
        <div class="flex items-center space-x-3">
<a href="/profile">
<img id="profileImage2" src="/img/user.jpg" class="w-10 h-10 rounded-full object-cover border-2 border-indigo-200 shadow-md" alt="profile">
</a>
          <div>

<span class="block font-semibold">Hello, <span id="userName">User</span>!</span>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
  document.addEventListener('DOMContentLoaded', async function() {
    // লোকাল স্টোরেজ থেকে auth key নিন
    const authKey = localStorage.getItem('authKey');
    
    if (authKey) {
      try {
        // Supabase config
        const SUPABASE_URL = 'https://kmycrnsktgpqvrztavrq.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtteWNybnNrdGdwcXZyenRhdnJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDYzNDY2ODYsImV4cCI6MjA2MTkyMjY4Nn0.TwSLsgCMZiE-Io3R7SGwO2eMfi4ComWmpBy4JGtzGuU';
        
        // When loaded with a script tag, Supabase is available as 'supabase'
        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        
        // Supabase থেকে ব্যবহারকারীর তথ্য নিন
        const { data, error } = await supabaseClient
          .from('users')  // users table
          .select('name')  // selecting name column
          .eq('auth_key', authKey)  // matching auth_key column
          .single();
        
        if (error) {
          console.error('Supabase error:', error);
          return;
        }
        
        if (data && data.name) {
          // ব্যবহারকারীর নাম প্রদর্শন করুন
          document.getElementById('userName').textContent = data.name;
        }
      } catch (error) {
        console.error('Error fetching user data:', error);
      }
    }
  });
</script>


            <button id="completeProfileBtn" class="text-xs text-indigo-600 hover:underline mt-1">
  <i class="fas fa-user-edit mr-1"></i>Complete your profile
</button>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const authKey = localStorage.getItem('authKey');
    const button = document.getElementById('completeProfileBtn');

    if (!authKey || !button) return;

    const profileImg = `/uploads/profile/${authKey}-profile.jpg`;
    const coverImg = `/uploads/cover/${authKey}-cover.jpg`;

    // Function to check if image exists
    function imageExists(url) {
      return fetch(url, { method: 'HEAD' })
        .then(res => res.ok)
        .catch(() => false);
    }

    // Check both images
    Promise.all([imageExists(profileImg), imageExists(coverImg)]).then(([profileOk, coverOk]) => {
      if (profileOk && coverOk) {
        button.style.display = 'none';
      } else {
        button.style.display = 'inline-block';
      }
    });

    // Redirect to /profile on click
    button.addEventListener('click', () => {
      window.location.href = '/profile';
    });
  });
</script>

          </div>
        </div>
        <button id="sideMenuClose" class="p-2 hover:bg-purple-50 rounded-lg text-lg text-gray-600"><i class="fas fa-times"></i></button>
      </div>
      <nav class="flex-1 p-6 pb-4">
        <ul class="space-y-2 font-medium">
          <li><a href="/profile" class="flex items-center p-2 rounded-lg hover:bg-purple-50 transition"><i class="fas fa-user mr-3 text-indigo-500"></i>My Profile</a></li>
          <li><a href="#" class="flex items-center p-2 rounded-lg hover:bg-purple-50 transition"><i class="fas fa-wallet mr-3 text-amber-500"></i>Payment</a></li>
          <li><a href="#" class="flex items-center p-2 rounded-lg hover:bg-purple-50 transition"><i class="fas fa-motorcycle mr-3 text-rose-500"></i>My Rides</a></li>
          <li><a href="/safety" class="flex items-center p-2 rounded-lg hover:bg-purple-50 transition"><i class="fas fa-shield-alt mr-3 text-green-500"></i>Safety</a></li>
          <li><a href="/refer" class="flex items-center p-2 rounded-lg bg-gradient-to-r from-indigo-100 via-orange-50 to-white"><i class="fas fa-gift mr-3 text-pink-400"></i>Refer and Earn<span class="ml-3 bg-indigo-100 text-indigo-600 px-3 py-1 rounded-full text-xs font-semibold">Get ₹50</span></a></li>
          <li><a href="#" class="flex items-center p-2 rounded-lg hover:bg-purple-50 transition"><i class="fas fa-award mr-3 text-yellow-500"></i>My Rewards</a></li>
          <li><a href="#" class="flex items-center p-2 rounded-lg hover:bg-purple-50 transition"><i class="fas fa-certificate mr-3 text-indigo-400"></i>Power Pass</a></li>
          <li><a href="#" class="flex items-center p-2 rounded-lg hover:bg-purple-50 transition"><i class="fas fa-coins mr-3 text-yellow-400"></i>Rapido Coins</a></li>
          <li><a href="#" class="flex items-center p-2 rounded-lg bg-gradient-to-r from-rose-50 via-amber-50 to-white font-semibold"><i class="fas fa-user-astronaut mr-3 text-rose-600"></i>Become a Captain!</a></li>
          <li><a href="/settings" class="flex items-center p-2 rounded-lg hover:bg-purple-50 transition"><i class="fas fa-cog mr-3 text-gray-400"></i>Settings</a></li>
          <li><a href="/chat" class="flex items-center p-2 rounded-lg hover:bg-purple-50 transition"><i class="fas fa-comment-dots mr-3 text-sky-400"></i>Chat With Us</a></li>
        </ul>
      </nav>
      <div class="p-6 bg-gradient-to-r from-indigo-50 to-white border-t border-purple-100">
        <button id="logoutBtn" class="w-full py-2 rounded-lg font-semibold bg-indigo-600 text-white hover:bg-indigo-700 transition shadow-lg flex items-center justify-center space-x-2">
          <i class="fas fa-sign-out-alt"></i>
          <span>Logout</span>
        </button>
      </div>
    </div>
  </div>
  <div id="sideMenuBackdrop" class="hidden fixed inset-0 bg-black bg-opacity-30 z-40 transition-opacity duration-300"></div>

  <main class="pt-24 lg:pt-28 px-4 max-w-3xl mx-auto animate-slide-up">

    <section class="relative mb-12">
      <div class="w-full px-8 py-10 glass rounded-3xl shadow-xl border border-purple-200 flex flex-col items-center text-center floating">
        <div class="w-20 h-20 bg-gradient-to-br from-indigo-200 via-rose-100 to-amber-100 rounded-full flex items-center justify-center mb-5 shadow-lg animate-bounce">
          <i class="fas fa-map-marker-alt text-4xl text-pink-500"></i>
        </div>
        <h1 class="text-3xl font-bold mb-2 tw-gradient">Book a Ride Now</h1>
        <p class="text-gray-500 mb-6">Fast, Reliable, and Affordable!
        Now available in your city Raiganj.</p>
        <div class="grid gap-4 sm:grid-cols-2 w-full max-w-lg mx-auto">
          <div class="relative">
            <label class="absolute left-3 top-2 text-xs text-gray-400 font-medium"><i class="fas fa-location-crosshairs mr-1 text-indigo-500"></i>Current Location</label>
            <input id="pickupInput" type="text" class="mt-5 block w-full py-2.5 px-4 rounded-xl border border-indigo-100 shadow-inner focus:ring-2 focus:ring-indigo-200 focus:outline-none transition bg-white bg-opacity-90 text-gray-700 font-semibold" placeholder="Detecting...">
            <button id="setCurrentBtn" class="absolute right-2.5 top-8 p-1.5 rounded-full bg-indigo-100 hover:bg-indigo-200 text-indigo-700 text-sm transition" title="Detect Again"><i class="fas fa-crosshairs"></i></button>
          </div>
          <div class="relative">
            <label class="absolute left-3 top-2 text-xs text-gray-400 font-medium"><i class="fas fa-map-marker-alt mr-1 text-pink-500"></i>Where to?</label>
            <input id="dropoffInput" type="text" autocomplete="off" class="mt-5 block w-full py-2.5 px-4 rounded-xl border border-pink-100 shadow-inner focus:ring-2 focus:ring-pink-200 focus:outline-none transition bg-white bg-opacity-90 text-gray-700 font-semibold" placeholder="Type destination...">
            <div id="dropoffSuggest" class="hidden absolute left-0 right-0 top-16 bg-white input-suggest-box border border-pink-100 z-30"></div>
          </div>
        </div>
        <button id="rideNowBtn" class="mt-7 px-8 py-3 rounded-2xl font-bold text-lg bg-gradient-to-r from-indigo-600 via-yellow-500 to-pink-500 text-white shadow-xl hover:scale-105 transform-gpu transition">Ride Now</button>
      </div>
      <div class="absolute -top-7 left-1/2 -translate-x-1/2 w-48 h-6 bg-gradient-to-r from-indigo-200 via-pink-100 to-amber-100 rounded-full blur-lg opacity-25"></div>
    </section>

    <section class="mb-10">
      <h2 class="font-bold text-2xl mb-5 tw-gradient">Our Services</h2>
      <div class="grid grid-cols-3 gap-6">
        <div class="text-center py-7 rounded-2xl glass shadow-lg border-2 border-indigo-100 hover:scale-105 transform-gpu transition active:scale-95 cursor-pointer">
          <span class="flex items-center justify-center w-14 h-14 mx-auto mb-2.5 bg-gradient-to-tr from-indigo-500 via-pink-400 to-yellow-400 rounded-full shadow-lg text-3xl text-white"><i class="fas fa-motorcycle"></i></span>
          <div class="font-semibold text-gray-700">Bike</div>
        </div>
        <div class="text-center py-7 rounded-2xl glass shadow-lg border-2 border-pink-100 hover:scale-105 transform-gpu transition cursor-pointer">
          <span class="flex items-center justify-center w-14 h-14 mx-auto mb-2.5 bg-gradient-to-tr from-pink-500 via-yellow-200 to-indigo-300 rounded-full shadow-lg text-3xl text-white"><i class="custom-icon"></i></span>
          <div class="font-semibold text-gray-700">Auto</div>
        </div>
        <div class="text-center py-7 rounded-2xl glass shadow-lg border-2 border-yellow-100 hover:scale-105 transform-gpu transition cursor-pointer">
          <span class="flex items-center justify-center w-14 h-14 mx-auto mb-2.5 bg-gradient-to-tr from-yellow-400 via-indigo-200 to-pink-200 rounded-full shadow-lg text-3xl text-white"><i class="fas fa-box"></i></span>
          <div class="font-semibold text-gray-700">Parcel</div>
        </div>
      </div>
    </section>

    <section class="mb-10">
      <h2 class="font-bold text-2xl mb-4 tw-gradient">Special Offers</h2>
      <div class="glass rounded-xl px-6 py-5 flex items-center justify-between gap-5 shadow-lg border border-indigo-100 hover:scale-[1.01] transition animate-slide-up">
        <div>
          <h3 class="font-bold text-lg text-indigo-700 mb-1">Refer &amp; Get <span class="text-pink-500">₹100 Reward!</span></h3>
          <p class="text-sm text-gray-500 mb-2">Refer 1 friend and get ₹100 in Coins instantly.</p>
       <a href="/refer">
          <button class="px-5 py-2 rounded-xl shadow bg-pink-500 hover:bg-pink-700 text-white font-semibold transition">Refer Now</button>
          </a>
        </div>
        <div class="w-14 h-14 bg-gradient-to-br from-pink-200 to-indigo-100 rounded-full flex items-center justify-center shadow-xl text-3xl text-pink-400 animate-bounce"><i class="fas fa-gift"></i></div>
      </div>
    </section>

    <section class="mb-10">
      <h2 class="font-bold text-2xl mb-4 tw-gradient">Popular Destinations</h2>
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-5">
        <div class="glass rounded-xl flex items-center px-4 py-5 shadow-md border-l-4 border-indigo-400 hover:scale-105 transition cursor-pointer group">
          <span class="w-12 h-12 bg-indigo-50 rounded-lg flex items-center justify-center text-2xl text-indigo-600 mr-4 shadow floating"><i class="fas fa-plane-departure"></i></span>
          <div class="flex-1">
            <div class="font-bold group-hover:text-indigo-700">Airport</div>
            <div class="text-xs text-gray-400">Hassle-free Airport Rides</div>
          </div>
          <span class="ml-2 text-indigo-300 text-sm"><i class="fas fa-chevron-right"></i></span>
        </div>
        <div class="glass rounded-xl flex items-center px-4 py-5 shadow-md border-l-4 border-pink-400 hover:scale-105 transition cursor-pointer group">
          <span class="w-12 h-12 bg-pink-50 rounded-lg flex items-center justify-center text-2xl text-pink-600 mr-4 shadow floating"><i class="fas fa-train"></i></span>
          <div class="flex-1">
            <div class="font-bold group-hover:text-pink-700">Railway Station</div>
            <div class="text-xs text-gray-400">Quick Rides to Railway</div>
          </div>
          <span class="ml-2 text-pink-300 text-sm"><i class="fas fa-chevron-right"></i></span>
        </div>
        <div class="glass rounded-xl flex items-center px-4 py-5 shadow-md border-l-4 border-yellow-400 hover:scale-105 transition cursor-pointer group">
          <span class="w-12 h-12 bg-yellow-50 rounded-lg flex items-center justify-center text-2xl text-yellow-600 mr-4 shadow floating"><i class="fas fa-bus"></i></span>
          <div class="flex-1">
            <div class="font-bold group-hover:text-yellow-700">Bus Terminal</div>
            <div class="text-xs text-gray-400">Reliable Captains</div>
          </div>
          <span class="ml-2 text-yellow-300 text-sm"><i class="fas fa-chevron-right"></i></span>
        </div>
      </div>
    </section>

    <section class="mb-12">
      <h2 class="font-bold text-2xl mb-4 tw-gradient">Why Choose Us?</h2>
      <div class="flex flex-wrap gap-6 justify-between">
        <div class="flex-1 min-w-[165px] glass rounded-2xl text-center px-6 py-7 shadow-md border-t-4 border-indigo-400 floating">
          <div class="w-12 h-12 mx-auto bg-indigo-100 rounded-full flex items-center justify-center mb-3 text-2xl text-indigo-700"><i class="fas fa-bolt"></i></div>
          <div class="font-bold mb-1 text-gray-700">Fast Booking</div>
          <div class="text-xs text-gray-400">Book in seconds</div>
        </div>
        <div class="flex-1 min-w-[165px] glass rounded-2xl text-center px-6 py-7 shadow-md border-t-4 border-green-400 floating">
          <div class="w-12 h-12 mx-auto bg-green-100 rounded-full flex items-center justify-center mb-3 text-2xl text-green-600"><i class="fas fa-shield-alt"></i></div>
          <div class="font-bold mb-1 text-gray-700">Safe Rides</div>
          <div class="text-xs text-gray-400">Your safety is our priority</div>
        </div>
        <div class="flex-1 min-w-[165px] glass rounded-2xl text-center px-6 py-7 shadow-md border-t-4 border-pink-400 floating">
          <div class="w-12 h-12 mx-auto bg-pink-100 rounded-full flex items-center justify-center mb-3 text-2xl text-pink-600"><i class="fas fa-tags"></i></div>
          <div class="font-bold mb-1 text-gray-700">Best Prices</div>
          <div class="text-xs text-gray-400">Affordable rides</div>
        </div>
      </div>
    </section>

    <section class="mb-11">
      <div class="bg-gradient-to-r from-indigo-300 via-pink-200 to-yellow-200 rounded-3xl shadow-2xl px-8 py-8 text-center flex flex-col items-center border-t-2 border-indigo-400">
        <div class="relative bg-white bg-opacity-80 px-5 py-2 rounded-2xl font-semibold text-sm text-indigo-700 shadow mb-3">#runAutoRide</div>
        <h2 class="tw-gradient text-3xl font-bold mb-2">Made For Bengali</h2>
        <p class="text-gray-500 text-lg">Crafted with ❤️ in West Bengal</p>
      </div>
    </section>
  </main>


<footer class="app-footer">
                <div>
                  <button 
  onclick="location.href='/developer'" 
  style="background: linear-gradient(90deg, #00c9ff, #92fe9d); border: none; color: white; padding: 15px 40px; text-align: center; text-decoration: none; font-size: 20px; font-weight: bold; border-radius: 50px; cursor: pointer; transition: background 0.3s, transform 0.3s;"
  onmouseover="this.style.transform='scale(1.05)';" 
  onmouseout="this.style.transform='scale(1)';"
>
                      View Portfolio
</button>
            <div class="footer-row">
                <p class="copyright">&copy; 2025 AutoRide. All rights reserved.</p>
            </div>
        </footer>
      
<script>
    // --- UI Helper Functions ---
    const show = (el) => el.classList.remove('hidden');
    const hide = (el) => el.classList.add('hidden');
    
    // --- Side Menu Logic ---
    const menuBtn = document.getElementById('menuBtn');
    const sideMenu = document.getElementById('sideMenu');
    const sideMenuBackdrop = document.getElementById('sideMenuBackdrop');
    
    const openMenu = () => {
        sideMenu.classList.replace('-translate-x-full', 'translate-x-0');
        show(sideMenuBackdrop);
        document.body.style.overflow = 'hidden';
    };
    
    const closeMenu = () => {
        sideMenu.classList.replace('translate-x-0', '-translate-x-full');
        hide(sideMenuBackdrop);
        document.body.style.overflow = '';
    };

    menuBtn.onclick = openMenu;
    sideMenuBackdrop.onclick = closeMenu;
    document.getElementById('sideMenuClose').onclick = closeMenu;

    // --- Notification Panel ---
    const notifBtn = document.getElementById('notifBtn');
    const notifPanel = document.getElementById('notifPanel');
    const notifCloseBtn = document.getElementById('notifCloseBtn');
    
    notifBtn.onclick = () => show(notifPanel);
    notifCloseBtn.onclick = () => hide(notifPanel);

    // --- Google Places API Integration ---
    async function initGoogleServices() {
        try {
            // 1. Fetch API Key from your Node.js Server
            const response = await fetch('/config');
            const { apiKey } = await response.json();

            // 2. Load Google Maps Script
            const script = document.createElement('script');
            script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=places`;
            script.async = true;
            script.defer = true;
            document.head.appendChild(script);

            script.onload = () => {
                setupAutocomplete();
                detectCurrentLocation(); // Auto detect on load
            };
        } catch (err) {
            console.error("Configuration load fail:", err);
            document.getElementById('pickupInput').value = "Error loading Maps";
        }
    }

    function setupAutocomplete() {
        const pickupInput = document.getElementById('pickupInput');
        const dropoffInput = document.getElementById('dropoffInput');

        // Malda Strict Boundary
        const maldaBounds = {
            north: 25.3500, south: 24.8500, east: 88.3000, west: 87.9000
        };

        const options = {
            bounds: maldaBounds,
            strictBounds: true,
            componentRestrictions: { country: "in" },
            fields: ["name", "geometry", "formatted_address"],
            types: ['establishment', 'geocode']
        };

        const pickupAuto = new google.maps.places.Autocomplete(pickupInput, options);
        const dropoffAuto = new google.maps.places.Autocomplete(dropoffInput, options);

        // Hide West Bengal/India from suggestions using dynamic CSS
        const style = document.createElement('style');
        style.innerHTML = `
            .pac-item > span:last-child { display: none !important; }
            .pac-logo:after { opacity: 0.3; filter: grayscale(100%); }
            .pac-container { border-radius: 12px; margin-top: 5px; border:none; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        `;
        document.head.appendChild(style);

        // Handle selection
        const handleSelect = (autocomplete, input) => {
            const place = autocomplete.getPlace();
            if (place.name) input.value = place.name;
        };

        pickupAuto.addListener("place_changed", () => handleSelect(pickupAuto, pickupInput));
        dropoffAuto.addListener("place_changed", () => handleSelect(dropoffAuto, dropoffInput));
    }

    // --- Current Location (GPS) ---
    function detectCurrentLocation() {
        const pickupInput = document.getElementById('pickupInput');
        pickupInput.value = "Detecting...";

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition((position) => {
                const geocoder = new google.maps.Geocoder();
                const latlng = { lat: position.coords.latitude, lng: position.coords.longitude };

                geocoder.geocode({ location: latlng }, (results, status) => {
                    if (status === "OK" && results[0]) {
                        // Sudhu landmark ba choto address ta neya
                        const parts = results[0].address_components;
                        pickupInput.value = parts[0].long_name + ", " + parts[1].long_name;
                    }
                });
            }, () => {
                pickupInput.value = "Location denied";
            });
        }
    }

    document.getElementById('setCurrentBtn').onclick = detectCurrentLocation;

    // --- Authentication & Buttons ---
    document.getElementById('rideNowBtn').onclick = () => {
        const dropoff = document.getElementById('dropoffInput').value;
        if (!dropoff) return alert("Please enter destination");
        
        alert("Redirecting to map for ride confirmation...");
        window.location.href = '/passenger_map';
    };

    document.getElementById('logoutBtn').onclick = () => {
        localStorage.removeItem('authKey');
        window.location.href = '/login';
    };

    // --- Protected Route ---
    (() => {
        const authKey = localStorage.getItem('authKey');
        if (!authKey && window.location.pathname !== '/login') {
            window.location.href = '/login';
        }
    })();

    // Start everything
    window.onload = initGoogleServices;
</script>
  <script>
  window.addEventListener("DOMContentLoaded", function() {
    window.AgentInitializer.init({
      rootId: "JotformAgent-0196de48239e7547a73dad213358e5d227b0",
      formID: "0196de48239e7547a73dad213358e5d227b0",
      queryParams: ["skipWelcome=1", "maximizable=1"],
      domain: "https:\/\/www.jotform.com",
      isInitialOpen: false,
      isDraggable: false,
      background: "linear-gradient(180deg, #FF8DB9 0%, #FF8DB9 100%)",
      buttonBackgroundColor: "#2AE283",
      buttonIconColor: "#150D0E",
      variant: false,
      customizations: {
        greeting: "Yes",
        greetingMessage: "Hi! How can I assist you?",
        pulse: "Yes",
        position: "right"
      }
    });
  });
</script>
  <% if (typeof loadingScreen !== "undefined") { %>
    <%- loadingCss %>
    <%- loadingScreen %>
    <%- loadingJs %>
    <% } %>
</body>
</html>